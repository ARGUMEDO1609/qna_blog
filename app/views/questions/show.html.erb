<%= turbo_stream_from [@question, :answers] %>
<div class="bg-white border rounded p-4">
  <div class="flex items-start justify-between gap-4">
    <h1 class="text-2xl font-bold"><%= @question.title %></h1>
    <span class="text-sm text-gray-500">por <%= @question.user.email %></span>
  </div>

  <p class="mt-3 text-gray-800 whitespace-pre-line"><%= @question.body %></p>

  <div class="mt-4 flex items-center gap-3">
    <%= render "likes/likes", likable: @question %>

    <% if user_signed_in? && @question.user == current_user %>
      <%= link_to "Editar", edit_question_path(@question), class: "px-3 py-1 rounded border" %>
      <%= button_to "Eliminar", @question, method: :delete,
            data: { turbo_confirm: "Â¿Eliminar la pregunta?" },
            class: "px-3 py-1 rounded border text-red-700" %>
    <% end %>
  </div>
</div>

<div class="mt-6">
  <h2 class="text-xl font-semibold mb-3">
    Respuestas (<%= @question.answers.count %>)
  </h2>

  <div id="answers" data-controller="answers-list" class="space-y-3">
    <%= turbo_frame_tag "answers" do %>
      <% @answers.each do |a| %>
        <%= render "answers/answer", answer: a %>
      <% end %>
    <% end %>
  </div>
</div>

<% if user_signed_in? %>
  <div class="mt-6 bg-white border rounded p-4">
    <h3 class="font-semibold mb-2">AÃ±adir una respuesta</h3>
    <%= render "answers/form", question: @question, answer: @answer %>
  </div>
<% end %>
